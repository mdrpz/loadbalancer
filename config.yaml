listener:
  host: "0.0.0.0"
  port: 8080
  mode: "http"             # "tcp" or "http"
  use_splice: false         # Zero-copy mode (TCP only, Linux, experimental)
  tls_enabled: false
  tls_cert: "certs/server.crt"
  tls_key: "certs/server.key"

backends:
  - host: "127.0.0.1"
    port: 8000
    weight: 1
  - host: "127.0.0.1"
    port: 8001
    weight: 1

routing:
  algorithm: "round_robin"
  max_connections_per_backend: 100
  max_global_connections: 1000

connection_pool:
  enabled: true              # Enable connection pooling for backend connections
  min_connections: 0         # Minimum idle connections per backend
  max_connections: 10        # Maximum pooled connections per backend
  idle_timeout_ms: 60000     # Close idle connections after 60s
  connect_timeout_ms: 5000   # Timeout for new pool connections

health_check:
  interval_ms: 5000
  timeout_ms: 500
  failure_threshold: 3
  success_threshold: 2
  type: "tcp"

backpressure:
  timeout_ms: 10000

metrics:
  enabled: true
  port: 9090

logging:
  level: "info"
  file: "/tmp/lb.log"
  access_log_enabled: true
  access_log_file: "/tmp/lb_access.log"

timeouts:
  request_ms: 5000

ip_filter:
  whitelist: []
  blacklist: []

http_headers:
  request:
    add:
      # X-Custom-Header: "value"
      # X-LB-Version: "1.0"
    remove:
      # - "User-Agent"

queue:
  enabled: true
  max_queue_size: 1024
  max_wait_ms: 5000

rate_limit:
  enabled: true
  max_connections: 100
  window_seconds: 60