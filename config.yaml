listener:
  host: "0.0.0.0"
  port: 8080
  mode: "http"              # "tcp" or "http"
  use_splice: false         # Zero-copy mode (TCP only, Linux, experimental)
  tls_enabled: false
  tls_cert: "certs/server.crt"
  tls_key: "certs/server.key"

backends:
  - host: "127.0.0.1"
    port: 8000   # nginx default port (use 8000 for python http.server)
    weight: 3   # Optional: for weighted routing (default: 1)
  - host: "127.0.0.1"
    port: 8001
    weight: 1

routing:
  algorithm: "round_robin"
  max_connections_per_backend: 100
  max_global_connections: 1000

connection_pool:
  enabled: true              # Enable connection pooling for backend connections
  min_connections: 0         # Minimum idle connections per backend
  max_connections: 10        # Maximum pooled connections per backend
  idle_timeout_ms: 60000     # Close idle connections after 60s
  connect_timeout_ms: 5000   # Timeout for new pool connections

health_check:
  interval_ms: 5000
  timeout_ms: 500
  failure_threshold: 3
  success_threshold: 2
  type: "tcp"

backpressure:
  timeout_ms: 10000

metrics:
  enabled: true
  port: 9090

logging:
  level: "debug"
  file: "/tmp/lb.log"